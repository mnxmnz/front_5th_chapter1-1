var r=Object.defineProperty;var h=(n,t,e)=>t in n?r(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var s=(n,t,e)=>h(n,typeof t!="symbol"?t+"":t,e);import{r as u,a as i,E as c,L as a,b as l,s as g,P as d,M as p}from"./authHandlers-DXSdPZEg.js";class f{constructor(t){s(this,"containerElement",null);s(this,"routeMapping",{});s(this,"protectedRoutes",["/profile"]);s(this,"guestOnlyRoutes",["/login"]);s(this,"activeRoutePath",null);s(this,"basePath","/front_5th_chapter1-1");this.routeMapping=t,this.containerElement=document.getElementById("root")||document.body,u(),this._initializeEventListeners(),this.processRouteChange()}_initializeEventListeners(){window.addEventListener("DOMContentLoaded",()=>this.processRouteChange()),window.addEventListener("popstate",()=>this.processRouteChange()),document.addEventListener("click",this._handleNavLinkClick.bind(this))}_handleNavLinkClick(t){if(t.target.tagName==="A"&&t.target.href.startsWith(window.location.origin)){t.preventDefault();const e=t.target.pathname,o=e.startsWith(this.basePath)?e.slice(this.basePath.length)||"/":e;this.changeRoute(o)}}hasAccessPermission(t){const e=i.getIsLoggedIn();return this.protectedRoutes.includes(t)?e:this.guestOnlyRoutes.includes(t)?!e:!0}_redirectBasedOnAuthStatus(){i.getIsLoggedIn()?this.changeRoute("/"):this.changeRoute("/login")}_renderPageContent(t){const e=t();if(typeof e=="string"){this.containerElement.innerHTML=e;return}e.template?(this.containerElement.innerHTML=e.template,typeof e.init=="function"&&e.init()):console.error()}getPath(){const t=window.location.pathname;return t.startsWith(this.basePath)?t.slice(this.basePath.length)||"/":t}processRouteChange(){const t=this.getPath();if(this.activeRoutePath=t,!this.hasAccessPermission(t)){this._redirectBasedOnAuthStatus();return}const e=this.routeMapping[t]||this.routeMapping["/error"];this._renderPageContent(e)}changeRoute(t){if(this.activeRoutePath===t)return;const e=t.startsWith("/")?`${this.basePath}${t}`:`${this.basePath}/${t}`;window.history.pushState({},"",e),this.processRouteChange()}}const P={"/":()=>a(p()),"/login":()=>l(),"/profile":()=>a(d()),"/error":()=>c()},m=new f(P);g(m);
